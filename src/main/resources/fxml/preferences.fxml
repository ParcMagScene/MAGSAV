<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.*?>

<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.magsav.gui.PreferencesController">
  

  
  <center>
    <TabPane fx:id="preferencesTabPane" tabClosingPolicy="UNAVAILABLE" styleClass="dark-tab-pane" style="-fx-padding: 10;">
      
      <!-- Section GÃ‰NÃ‰RAL -->
      <Tab text="âš™ï¸ GÃ©nÃ©ral" closable="false">
        <ScrollPane fitToWidth="true" styleClass="dark-scroll-pane" style="-fx-background-color: transparent;">
          <VBox spacing="25" styleClass="dark-content-container" style="-fx-padding: 20;">
            

            <!-- Section Langue et Localisation -->
            <VBox spacing="15" styleClass="dark-section-card" style="-fx-padding: 20;">
              <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="ðŸŒ" style="-fx-font-size: 16;"/>
                <Label text="Langue et Localisation" styleClass="dark-section-title" style="-fx-font-size: 16; -fx-font-weight: bold;"/>
              </HBox>
              
              <GridPane hgap="15" vgap="10">
                <columnConstraints>
                  <ColumnConstraints minWidth="150"/>
                  <ColumnConstraints hgrow="ALWAYS"/>
                </columnConstraints>
                
                <Label text="Langue :" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                <ComboBox fx:id="cbLanguage" prefWidth="200" GridPane.rowIndex="0" GridPane.columnIndex="1"/>
                
                <Label text="Format de date :" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                <ComboBox fx:id="cbDateFormat" prefWidth="200" GridPane.rowIndex="1" GridPane.columnIndex="1"/>
                
                <Label text="Format d'heure :" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                <ComboBox fx:id="cbTimeFormat" prefWidth="200" GridPane.rowIndex="2" GridPane.columnIndex="1"/>
                
                <Label text="Devise :" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                <ComboBox fx:id="cbCurrency" prefWidth="200" GridPane.rowIndex="3" GridPane.columnIndex="1"/>
              </GridPane>
            </VBox>
            
            <!-- Section Notifications -->
            <VBox spacing="15" styleClass="dark-section-card" style="-fx-padding: 20;">
              <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="ï¿½" style="-fx-font-size: 16;"/>
                <Label text="Notifications" styleClass="dark-section-title" style="-fx-font-size: 16; -fx-font-weight: bold;"/>
              </HBox>
              
              <VBox spacing="10">
                <CheckBox fx:id="chkShowNotifications" text="Afficher les notifications systÃ¨me" selected="true"/>
                <CheckBox fx:id="chkSoundNotifications" text="Notifications sonores" selected="false"/>
                <CheckBox fx:id="chkEmailNotifications" text="Notifications par email" selected="true"/>
                <CheckBox fx:id="chkDesktopNotifications" text="Notifications desktop" selected="true"/>
                
                <HBox spacing="15" alignment="CENTER_LEFT">
                  <Label text="DurÃ©e d'affichage :" minWidth="150"/>
                  <Spinner fx:id="spinnerNotificationDuration" min="1" max="30" initialValue="5" prefWidth="100"/>
                  <Label text="secondes"/>
                </HBox>
              </VBox>
            </VBox>
            
          </VBox>
        </ScrollPane>
      </Tab>
      
      <!-- Section APPARENCE -->
      <Tab text="ðŸŽ¨ Apparence" closable="false">
        <ScrollPane fitToWidth="true" styleClass="dark-scroll-pane" style="-fx-background-color: transparent;">
          <VBox spacing="25" styleClass="dark-content-container" style="-fx-padding: 20;">
            
            <!-- Section Apparence et ThÃ¨mes -->
            <VBox spacing="15" styleClass="dark-section-card" style="-fx-padding: 20;">
              <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="ðŸŽ¨" style="-fx-font-size: 16;"/>
                <Label text="Apparence et ThÃ¨mes" styleClass="dark-section-title" style="-fx-font-size: 16; -fx-font-weight: bold;"/>
              </HBox>
              
              <Label text="Personnalisez l'interface de l'application selon vos prÃ©fÃ©rences." 
                     style="-fx-text-fill: #666; -fx-font-size: 12;" wrapText="true"/>
              
              <!-- ThÃ¨me gÃ©nÃ©ral -->
              <HBox spacing="15" alignment="CENTER_LEFT">
                <Label text="ThÃ¨me actuel :" minWidth="120"/>
                <ComboBox fx:id="themeSelector" prefWidth="200"/>
              </HBox>
              
              <!-- Couleurs personnalisÃ©es -->
              <VBox spacing="10">
                <Label text="Couleurs personnalisÃ©es" style="-fx-font-weight: bold; -fx-font-size: 14;"/>
                
                <GridPane hgap="15" vgap="10">
                  <columnConstraints>
                    <ColumnConstraints minWidth="120"/>
                    <ColumnConstraints prefWidth="100"/>
                    <ColumnConstraints hgrow="ALWAYS"/>
                  </columnConstraints>
                  
                  <Label text="Couleur sidebar :" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                  <ColorPicker fx:id="sidebarColorPicker" prefWidth="100" GridPane.rowIndex="0" GridPane.columnIndex="1"/>
                  <Label fx:id="sidebarColorLabel" text="#1e3a5f" GridPane.rowIndex="0" GridPane.columnIndex="2"/>
                  
                  <Label text="Fond principal :" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                  <ColorPicker fx:id="backgroundColorPicker" prefWidth="100" GridPane.rowIndex="1" GridPane.columnIndex="1"/>
                  <Label fx:id="backgroundColorLabel" text="#000000" GridPane.rowIndex="1" GridPane.columnIndex="2"/>
                  
                  <Label text="Couleur onglets :" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                  <ColorPicker fx:id="tabColorPicker" prefWidth="100" GridPane.rowIndex="2" GridPane.columnIndex="1"/>
                  <Label fx:id="tabColorLabel" text="#1a1a1a" GridPane.rowIndex="2" GridPane.columnIndex="2"/>
                  
                  <Label text="Couleur accent :" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                  <ColorPicker fx:id="accentColorPicker" prefWidth="100" GridPane.rowIndex="3" GridPane.columnIndex="1"/>
                  <Label fx:id="accentColorLabel" text="#4a90e2" GridPane.rowIndex="3" GridPane.columnIndex="2"/>
                  
                  <Label text="Couleur texte :" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                  <ColorPicker fx:id="textColorPicker" prefWidth="100" GridPane.rowIndex="4" GridPane.columnIndex="1"/>
                  <Label fx:id="textColorLabel" text="#ffffff" GridPane.rowIndex="4" GridPane.columnIndex="2"/>
                </GridPane>
                
                <!-- Boutons d'action apparence -->
                <HBox spacing="10" alignment="CENTER_LEFT">
                  <Button fx:id="applyAppearanceButton" text="ðŸŽ¨ Appliquer" 
                          style="-fx-background-color: #4CAF50; -fx-text-fill: white;"/>
                  <Button fx:id="resetAppearanceButton" text="ðŸ”„ Restaurer dÃ©faut" 
                          style="-fx-background-color: #FF9800; -fx-text-fill: white;"/>
                </HBox>
              </VBox>
              
              <!-- PrÃ©visualisation -->
              <VBox spacing="10">
                <Label text="PrÃ©visualisation" style="-fx-font-weight: bold; -fx-font-size: 14;"/>
                <VBox fx:id="previewPane" spacing="10" maxWidth="400" style="-fx-border-color: #ccc; -fx-border-radius: 5; -fx-padding: 10;">
                  <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-background-color: #1e3a5f; -fx-padding: 8; -fx-text-fill: white;">
                    <Label text="ðŸ " style="-fx-text-fill: white;"/>
                    <Label text="Dashboard" style="-fx-text-fill: white;"/>
                  </HBox>
                  <HBox spacing="10">
                    <VBox spacing="5" HBox.hgrow="ALWAYS" style="-fx-background-color: #f5f5f5; -fx-padding: 8;">
                      <Label text="Contenu principal" style="-fx-font-weight: bold;"/>
                      <Label text="Texte d'exemple"/>
                    </VBox>
                  </HBox>
                </VBox>
              </VBox>
            </VBox>
            
          </VBox>
        </ScrollPane>
      </Tab>
      
      <!-- Section SYSTÃˆME -->
      <Tab text="ðŸ–¥ï¸ SystÃ¨me" closable="false">
        <ScrollPane fitToWidth="true" styleClass="dark-scroll-pane" style="-fx-background-color: transparent;">
          <VBox spacing="25" styleClass="dark-content-container" style="-fx-padding: 20;">
            
            <!-- Section Configuration Email -->
            <VBox spacing="15" styleClass="dark-section-card" style="-fx-padding: 20;">
              <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="ðŸ“§" style="-fx-font-size: 16;"/>
                <Label text="Configuration Email" styleClass="dark-section-title" style="-fx-font-size: 16; -fx-font-weight: bold;"/>
              </HBox>
              
              <Label text="ParamÃ¨tres pour l'envoi automatique d'emails depuis l'application." 
                     style="-fx-text-fill: #666; -fx-font-size: 12;" wrapText="true"/>
              
              <GridPane hgap="15" vgap="10">
                <columnConstraints>
                  <ColumnConstraints minWidth="120"/>
                  <ColumnConstraints hgrow="ALWAYS"/>
                </columnConstraints>
                
                <Label text="Serveur SMTP:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                <TextField fx:id="txtSmtpServer" promptText="smtp.gmail.com" GridPane.rowIndex="0" GridPane.columnIndex="1"/>
                
                <Label text="Port:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                <TextField fx:id="txtSmtpPort" promptText="587" GridPane.rowIndex="1" GridPane.columnIndex="1"/>
                
                <Label text="Utilisateur:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                <TextField fx:id="txtEmailUser" promptText="votre.email@domaine.com" GridPane.rowIndex="2" GridPane.columnIndex="1"/>
                
                <Label text="Mot de passe:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                <PasswordField fx:id="txtEmailPassword" promptText="Mot de passe ou token d'application" GridPane.rowIndex="3" GridPane.columnIndex="1"/>
                
                <Label text="ExpÃ©diteur:" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                <TextField fx:id="txtSenderName" promptText="MAGSAV - Gestion SAV" GridPane.rowIndex="4" GridPane.columnIndex="1"/>
              </GridPane>
              
              <HBox spacing="10">
                <CheckBox fx:id="chkUseTLS" text="Utiliser TLS/SSL" selected="true"/>
                <Button fx:id="btnTestEmail" text="ðŸ§ª Tester la Configuration" onAction="#onTestEmailConfig"/>
              </HBox>
            </VBox>
            
            <!-- Section SÃ©curitÃ© -->
            <VBox spacing="15" styleClass="dark-section-card" style="-fx-padding: 20;">
              <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="ðŸ”’" style="-fx-font-size: 16;"/>
                <Label text="SÃ©curitÃ©" styleClass="dark-section-title" style="-fx-font-size: 16; -fx-font-weight: bold;"/>
              </HBox>
              
              <VBox spacing="10">
                <CheckBox fx:id="chkRequirePassword" text="Exiger un mot de passe au dÃ©marrage" selected="false"/>
                <CheckBox fx:id="chkAutoLock" text="Verrouillage automatique" selected="false"/>
                <CheckBox fx:id="chkLogAccess" text="Journaliser les accÃ¨s" selected="true"/>
                <CheckBox fx:id="chkEncryptData" text="Chiffrer les donnÃ©es sensibles" selected="true"/>
                
                <HBox spacing="15" alignment="CENTER_LEFT">
                  <Label text="DÃ©lai de verrouillage :" minWidth="150"/>
                  <Spinner fx:id="spinnerLockDelay" min="1" max="120" initialValue="15" prefWidth="100"/>
                  <Label text="minutes"/>
                </HBox>
                
                <HBox spacing="10">
                  <Button fx:id="btnChangePassword" text="ðŸ”‘ Changer mot de passe" onAction="#onChangePassword"/>
                  <Button fx:id="btnViewLogs" text="ðŸ“‹ Voir les logs" onAction="#onViewSecurityLogs"/>
                </HBox>
              </VBox>
            </VBox>
            
            <!-- Section Base de DonnÃ©es -->
            <VBox spacing="15" styleClass="dark-section-card" style="-fx-padding: 20;">
              <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="ðŸ—„ï¸" style="-fx-font-size: 16;"/>
                <Label text="Base de DonnÃ©es" styleClass="dark-section-title" style="-fx-font-size: 16; -fx-font-weight: bold;"/>
              </HBox>
              
              <VBox spacing="10">
                <HBox spacing="15" alignment="CENTER_LEFT">
                  <Label text="Chemin de la base :" minWidth="150"/>
                  <TextField fx:id="txtDatabasePath" text="data/MAGSAV.db" prefWidth="300" editable="false"/>
                  <Button fx:id="btnBrowseDatabase" text="ðŸ“" onAction="#onBrowseDatabasePath"/>
                </HBox>
                
                <HBox spacing="15" alignment="CENTER_LEFT">
                  <Label text="Sauvegarde auto :" minWidth="150"/>
                  <CheckBox fx:id="chkAutoBackup" text="Activer" selected="true"/>
                  <Spinner fx:id="spinnerBackupInterval" min="1" max="24" initialValue="6" prefWidth="80"/>
                  <Label text="heures"/>
                </HBox>
                
                <HBox spacing="10">
                  <Button fx:id="btnBackupNow" text="ðŸ’¾ Sauvegarder maintenant" onAction="#onBackupDatabase"/>
                  <Button fx:id="btnRestoreBackup" text="ðŸ”„ Restaurer sauvegarde" onAction="#onRestoreDatabase"/>
                  <Button fx:id="btnOptimizeDB" text="âš¡ Optimiser base" onAction="#onOptimizeDatabase"/>
                  <Button fx:id="btnCleanDuplicates" text="ðŸ§¹ Nettoyer doublons" onAction="#onCleanDuplicates"/>
                </HBox>
                
                <Label fx:id="lblDatabaseStats" text="Statistiques: Chargement..." style="-fx-text-fill: #666; -fx-font-size: 12;"/>
              </VBox>
            </VBox>
            
            <!-- Section DÃ©veloppement et Tests -->
            <VBox spacing="15" styleClass="dark-section-card" style="-fx-padding: 20;">
              <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="ðŸ”§" style="-fx-font-size: 16;"/>
                <Label text="Outils de DÃ©veloppement" styleClass="dark-section-title" style="-fx-font-size: 16; -fx-font-weight: bold;"/>
              </HBox>
              
              <Label text="Outils pour les dÃ©veloppeurs et les tests de l'application." 
                     style="-fx-text-fill: #666; -fx-font-size: 12;" wrapText="true"/>
              
              <HBox spacing="10">
                <Button fx:id="btnGenerateTestData" text="ðŸ”§ GÃ©nÃ©rer donnÃ©es de test" onAction="#onGenerateTestData" 
                        style="-fx-background-color: #f39c12; -fx-text-fill: white; -fx-font-weight: bold;"/>
                <Button fx:id="btnClearTestData" text="ðŸ§¹ Vider donnÃ©es de test" onAction="#onClearTestData" 
                        style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-font-weight: bold;"/>
              </HBox>
              
              <Label text="âš ï¸ Attention: Ces outils sont destinÃ©s au dÃ©veloppement uniquement." 
                     style="-fx-text-fill: #e67e22; -fx-font-size: 11; -fx-font-style: italic;"/>
            </VBox>
            
          </VBox>
        </ScrollPane>
      </Tab>
      
      <!-- Section MAINTENANCE -->
      <Tab text="ðŸ§¹ Maintenance" closable="false">
        <ScrollPane fitToWidth="true" styleClass="dark-scroll-pane" style="-fx-background-color: transparent;">
          <VBox spacing="25" styleClass="dark-content-container" style="-fx-padding: 20;">
            
            <!-- Section Maintenance MÃ©dias -->
            <VBox spacing="15" styleClass="dark-section-card" style="-fx-padding: 20;">
              <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="ðŸ–¼ï¸" style="-fx-font-size: 16;"/>
                <Label text="Gestion des Fichiers MÃ©dias" styleClass="dark-section-title" style="-fx-font-size: 16; -fx-font-weight: bold;"/>
              </HBox>
              
              <Label text="Maintenance et optimisation des fichiers images, photos et documents." 
                     style="-fx-text-fill: #666; -fx-font-size: 12;" wrapText="true"/>
              
              <GridPane hgap="15" vgap="10">
                <columnConstraints>
                  <ColumnConstraints minWidth="150"/>
                  <ColumnConstraints hgrow="ALWAYS"/>
                </columnConstraints>
                
                <Label text="Dossier photos:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                <HBox spacing="5" GridPane.rowIndex="0" GridPane.columnIndex="1">
                  <TextField fx:id="txtPhotosPath" text="photos/" prefWidth="300"/>
                  <Button fx:id="btnBrowsePhotos" text="ðŸ“" onAction="#onBrowsePhotosPath"/>
                </HBox>
                
                <Label text="Dossier mÃ©dias:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                <HBox spacing="5" GridPane.rowIndex="1" GridPane.columnIndex="1">
                  <TextField fx:id="txtMediasPath" text="medias/" prefWidth="300"/>
                  <Button fx:id="btnBrowseMedias" text="ðŸ“" onAction="#onBrowseMediasPath"/>
                </HBox>
                
                <Label text="QualitÃ© images:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                <HBox spacing="5" GridPane.rowIndex="2" GridPane.columnIndex="1">
                  <Slider fx:id="sliderImageQuality" min="0.1" max="1.0" value="0.8" showTickLabels="true" showTickMarks="true" prefWidth="200"/>
                  <Label fx:id="lblQualityValue" text="80%"/>
                </HBox>
              </GridPane>
              
              <VBox spacing="10">
                <Label text="Actions de Maintenance" styleClass="dark-section-title" style="-fx-font-size: 14; -fx-font-weight: bold;"/>
                <HBox spacing="10">
                  <Button fx:id="btnOptimizeImages" text="âš¡ Optimiser Images" onAction="#onOptimizeImages"/>
                  <Button fx:id="btnGenerateThumbnails" text="ï¿½ï¸ GÃ©nÃ©rer Miniatures" onAction="#onGenerateThumbnails"/>
                </HBox>
                
                <Label fx:id="lblMediaStats" text="" style="-fx-text-fill: #666; -fx-font-size: 12;" wrapText="true"/>
              </VBox>
            </VBox>
            
            <!-- Section Import/Export -->
            <VBox spacing="15" styleClass="dark-section-card" style="-fx-padding: 20;">
              <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="ðŸ“¥" style="-fx-font-size: 16;"/>
                <Label text="Import/Export" styleClass="dark-section-title" style="-fx-font-size: 16; -fx-font-weight: bold;"/>
              </HBox>
              
              <Label text="Importation et exportation des donnÃ©es de l'application." 
                     style="-fx-text-fill: #666; -fx-font-size: 12;" wrapText="true"/>
              
              <VBox spacing="15">
                <!-- Import -->
                <VBox spacing="10">
                  <Label text="Importation" styleClass="dark-section-title" style="-fx-font-size: 14; -fx-font-weight: bold;"/>
                  <HBox spacing="10">
                    <Button fx:id="btnImportProducts" text="ðŸ“¦ Importer Produits" onAction="#onImportProducts"/>
                    <Button fx:id="btnImportClients" text="ðŸ‘¥ Importer Clients" onAction="#onImportClients"/>
                    <Button fx:id="btnImportCompanies" text="ðŸ¢ Importer Entreprises" onAction="#onImportCompanies"/>
                  </HBox>
                  <HBox spacing="10">
                    <Button fx:id="btnImportFromFolder" text="ðŸ“ Importer depuis dossier" onAction="#onImportFromFolder"/>
                    <Button fx:id="btnImportFromClipboard" text="ðŸ“‹ Importer depuis presse-papier" onAction="#onImportFromClipboard"/>
                  </HBox>
                </VBox>
                
                <!-- Export -->
                <VBox spacing="10">
                  <Label text="Exportation" styleClass="dark-section-title" style="-fx-font-size: 14; -fx-font-weight: bold;"/>
                  <HBox spacing="10">
                    <Button fx:id="btnExportProducts" text="ðŸ“¦ Exporter Produits" onAction="#onExportProducts"/>
                    <Button fx:id="btnExportClients" text="ðŸ‘¥ Exporter Clients" onAction="#onExportClients"/>
                    <Button fx:id="btnExportCompanies" text="ðŸ¢ Exporter Entreprises" onAction="#onExportCompanies"/>
                  </HBox>
                  <HBox spacing="10">
                    <Button fx:id="btnExportAll" text="ðŸ—‚ï¸ Exporter tout" onAction="#onExportAll"/>
                    <Button fx:id="btnExportReport" text="ðŸ“Š Exporter rapport" onAction="#onExportReport"/>
                  </HBox>
                  
                  <HBox spacing="15" alignment="CENTER_LEFT">
                    <Label text="Format d'export :" minWidth="120"/>
                    <ComboBox fx:id="cbExportFormat" prefWidth="150"/>
                  </HBox>
                </VBox>
              </VBox>
            </VBox>
            
            <Separator/>
            
            <!-- Section Nettoyage Automatique -->
            <VBox spacing="10">
              <Label text="Nettoyage Automatique" styleClass="dark-section-title" style="-fx-font-size: 14; -fx-font-weight: bold;"/>
              <Label text="Configuration avancÃ©e pour l'optimisation et le nettoyage automatique." 
                     style="-fx-text-fill: #666; -fx-font-size: 12;" wrapText="true"/>
              
              <GridPane hgap="15" vgap="10">
                <columnConstraints>
                  <ColumnConstraints minWidth="180"/>
                  <ColumnConstraints hgrow="ALWAYS"/>
                </columnConstraints>
                
                <Label text="Seuil qualitÃ© minimale:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                <HBox spacing="5" GridPane.rowIndex="0" GridPane.columnIndex="1">
                  <Slider fx:id="sliderMinQuality" min="0.3" max="1.0" value="0.6" showTickLabels="true" showTickMarks="true" prefWidth="150"/>
                  <Label fx:id="lblMinQualityValue" text="60%"/>
                </HBox>
                
                <Label text="Taille minimale autorisÃ©e:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                <HBox spacing="5" GridPane.rowIndex="1" GridPane.columnIndex="1">
                  <Spinner fx:id="spinnerMinSize" min="100" max="1000" initialValue="300" prefWidth="80"/>
                  <Label text="pixels"/>
                </HBox>
                
                <Label text="Formats autorisÃ©s:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                <VBox spacing="5" GridPane.rowIndex="2" GridPane.columnIndex="1">
                  <CheckBox fx:id="chkFormatJPG" text="JPG/JPEG" selected="true"/>
                  <CheckBox fx:id="chkFormatPNG" text="PNG" selected="true"/>
                  <CheckBox fx:id="chkFormatWEBP" text="WEBP" selected="false"/>
                </VBox>
              </GridPane>
              
              <!-- Actions avancÃ©es -->
              <HBox spacing="10">
                <Button fx:id="btnScanMedia" text="ðŸ” Scanner MÃ©dias" onAction="#onScanMedia"/>
                <Button fx:id="btnCleanupDuplicates" text="ðŸ—‘ï¸ Supprimer Doublons" onAction="#onCleanupDuplicates"/>
              </HBox>
              
              <HBox spacing="10">
                <Button fx:id="btnRepairLinks" text="ðŸ”§ RÃ©parer Liens" onAction="#onRepairLinks" 
                        style="-fx-background-color: #FF9800; -fx-text-fill: white;"/>
                <Button fx:id="btnFullMaintenance" text="ðŸ”„ Maintenance ComplÃ¨te" onAction="#onFullMaintenance"
                        style="-fx-background-color: #4CAF50; -fx-text-fill: white;"/>
              </HBox>
              
              <Label fx:id="lblMaintenanceStats" text="" style="-fx-text-fill: #666; -fx-font-size: 12;" wrapText="true"/>
              
              <ProgressBar fx:id="progressMaintenance" visible="false" prefWidth="400"/>
              <Label fx:id="lblMaintenanceProgress" text="" visible="false" style="-fx-font-size: 12;"/>
            </VBox>
            
          </VBox>
        </ScrollPane>
      </Tab>
      
      <!-- Onglet Scraping Images -->
      <Tab text="ðŸ–¼ï¸ Scraping Images" closable="false">
        <ScrollPane fitToWidth="true" styleClass="dark-scroll-pane" style="-fx-background-color: transparent;">
          <VBox spacing="20" style="-fx-padding: 20;">
            
            <!-- Section Sources de Scraping -->
            <VBox spacing="10">
              <Label text="Sources de Scraping" styleClass="dark-section-title" style="-fx-font-size: 14; -fx-font-weight: bold;"/>
              <Label text="Configuration des fabricants et revendeurs pour le scraping automatique d'images." 
                     style="-fx-text-fill: #666; -fx-font-size: 12;" wrapText="true"/>
              
              <TableView fx:id="sourcesTable" prefHeight="200">
                <columns>
                  <TableColumn fx:id="colSourceType" text="Type" prefWidth="80"/>
                  <TableColumn fx:id="colSourceName" text="Nom" prefWidth="150"/>  
                  <TableColumn fx:id="colSourceUrl" text="URL de Base" prefWidth="200"/>
                  <TableColumn fx:id="colSourcePattern" text="Motif de Recherche" prefWidth="200"/>
                  <TableColumn fx:id="colSourceEnabled" text="ActivÃ©" prefWidth="60"/>
                </columns>
                <columnResizePolicy>
                  <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                </columnResizePolicy>
              </TableView>
              
              <HBox spacing="10">
                <Button fx:id="btnAddSource" text="âž• Ajouter Source" onAction="#onAddSource"/>
                <Button fx:id="btnEditSource" text="âœï¸ Modifier" onAction="#onEditSource" disable="true"/>
                <Button fx:id="btnDeleteSource" text="âŒ Supprimer" onAction="#onDeleteSource" disable="true"/>
                <Separator orientation="VERTICAL"/>
                <Button fx:id="btnTestSource" text="ðŸ§ª Tester" onAction="#onTestSource" disable="true"/>
              </HBox>
            </VBox>
            
            <Separator/>
            
            <!-- Section ParamÃ¨tres de Scraping -->
            <VBox spacing="10">
              <Label text="ParamÃ¨tres de Scraping" styleClass="dark-section-title" style="-fx-font-size: 14; -fx-font-weight: bold;"/>
              
              <GridPane hgap="15" vgap="10">
                <columnConstraints>
                  <ColumnConstraints minWidth="150"/>
                  <ColumnConstraints hgrow="ALWAYS"/>
                </columnConstraints>
                
                <Label text="DÃ©lai entre requÃªtes:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                <HBox spacing="5" GridPane.rowIndex="0" GridPane.columnIndex="1">
                  <Spinner fx:id="spinnerDelay" min="1" max="30" initialValue="3" prefWidth="80"/>
                  <Label text="secondes"/>
                </HBox>
                
                <Label text="Timeout des requÃªtes:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                <HBox spacing="5" GridPane.rowIndex="1" GridPane.columnIndex="1">
                  <Spinner fx:id="spinnerTimeout" min="5" max="60" initialValue="15" prefWidth="80"/>
                  <Label text="secondes"/>
                </HBox>
                
                <Label text="Format de sortie:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                <HBox spacing="5" GridPane.rowIndex="2" GridPane.columnIndex="1">
                  <ComboBox fx:id="cbOutputFormat" prefWidth="100" value="JPG"/>
                  <Label text="(recommandÃ©: JPG pour une qualitÃ© optimale)"/>
                </HBox>
                
                <Label text="QualitÃ© images:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                <HBox spacing="5" GridPane.rowIndex="3" GridPane.columnIndex="1">
                  <Slider fx:id="sliderScrapingQuality" min="0.5" max="1.0" value="0.85" showTickLabels="true" showTickMarks="true" prefWidth="150"/>
                  <Label fx:id="lblScrapingQualityValue" text="85%"/>
                </HBox>
                
                <Label text="Taille maximale:" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                <HBox spacing="5" GridPane.rowIndex="4" GridPane.columnIndex="1">
                  <Spinner fx:id="spinnerMaxWidth" min="400" max="2000" initialValue="800" prefWidth="80"/>
                  <Label text="Ã— "/>
                  <Spinner fx:id="spinnerMaxHeight" min="400" max="2000" initialValue="800" prefWidth="80"/>
                  <Label text="pixels"/>
                </HBox>
              </GridPane>
            </VBox>
            
            <Separator/>
            
            <!-- Section Actions et Validation -->
            <VBox spacing="10">
              <Label text="Actions et Validation" styleClass="dark-section-title" style="-fx-font-size: 14; -fx-font-weight: bold;"/>
              
              <HBox spacing="10">
                <Button fx:id="btnScrapeMissing" text="ðŸ–¼ï¸ Scraper Produits sans Images" 
                        onAction="#onScrapeMissingImages" style="-fx-background-color: #4CAF50; -fx-text-fill: white;"/>
                <Button fx:id="btnValidateImages" text="âœ… Valider Correspondances" 
                        onAction="#onValidateImageCorrespondences" style="-fx-background-color: #FF9800; -fx-text-fill: white;"/>
                <Button fx:id="btnViewStats" text="ðŸ“Š Statistiques" onAction="#onViewStats"/>
              </HBox>
              
              <Label fx:id="lblScrapingStats" text="" style="-fx-text-fill: #666; -fx-font-size: 12;" wrapText="true"/>
              
              <ProgressBar fx:id="progressScraping" visible="false" prefWidth="400"/>
              <Label fx:id="lblScrapingProgress" text="" visible="false" style="-fx-font-size: 12;"/>
            </VBox>
            
          </VBox>
        </ScrollPane>
      </Tab>
      
      <!-- Onglet CatÃ©gories -->
      <Tab text="ðŸ“ CatÃ©gories" closable="false">
        <ScrollPane fitToWidth="true" styleClass="dark-scroll-pane" style="-fx-background-color: transparent;">
          <VBox spacing="20" style="-fx-padding: 20;">
            
            <!-- Section Recherche -->
            <VBox spacing="10">
              <Label text="Recherche et Navigation" styleClass="dark-section-title" style="-fx-font-size: 14; -fx-font-weight: bold;"/>
              <HBox spacing="10">
                <TextField fx:id="txtCategorySearch" promptText="Rechercher une catÃ©gorie..." prefWidth="300"/>
                <Button fx:id="btnRefreshCategories" text="ðŸ”„ Actualiser" onAction="#onRefreshCategories"/>
              </HBox>
            </VBox>
            
            <!-- Section Table des CatÃ©gories -->
            <VBox spacing="10" VBox.vgrow="ALWAYS">
              <Label text="Liste des CatÃ©gories" styleClass="dark-section-title" style="-fx-font-size: 14; -fx-font-weight: bold;"/>
              
              <TableView fx:id="tableCategoriesInTab" prefHeight="300" VBox.vgrow="ALWAYS">
                <columns>
                  <TableColumn fx:id="colCatId" text="ID" prefWidth="60"/>
                  <TableColumn fx:id="colCatHierarchy" text="HiÃ©rarchie" prefWidth="300"/>
                  <TableColumn fx:id="colCatName" text="Nom" prefWidth="200"/>
                  <TableColumn fx:id="colCatType" text="Type" prefWidth="120"/>
                  <TableColumn fx:id="colCatParent" text="Parent" prefWidth="180"/>
                </columns>
                <columnResizePolicy>
                  <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                </columnResizePolicy>
              </TableView>
              
              <!-- Actions CatÃ©gories -->
              <HBox spacing="10">
                <Button fx:id="btnAddCategoryInTab" text="âž• Ajouter CatÃ©gorie" onAction="#onAddCategoryInTab"/>
                <Button fx:id="btnAddSubcategoryInTab" text="âž• Sous-catÃ©gorie" onAction="#onAddSubcategoryInTab"/>
                <Button fx:id="btnEditCategoryInTab" text="âœï¸ Modifier" onAction="#onEditCategoryInTab" disable="true"/>
                <Button fx:id="btnDeleteCategoryInTab" text="âŒ Supprimer" onAction="#onDeleteCategoryInTab" disable="true"/>
                <Separator orientation="VERTICAL"/>
                <Button fx:id="btnRefreshCategoriesData" text="ï¿½ Actualiser DonnÃ©es" onAction="#onRefreshCategoriesData" style="-fx-background-color: #16a085; -fx-text-fill: white;"/>
              </HBox>
            </VBox>
            
          </VBox>
        </ScrollPane>
      </Tab>
      
      <!-- Onglet MÃ©dias -->
      <Tab text="ðŸ–¼ï¸ MÃ©dias" closable="false">
        <ScrollPane fitToWidth="true" styleClass="dark-scroll-pane" style="-fx-background-color: transparent;">
          <VBox spacing="20" style="-fx-padding: 20;">
            
            <!-- Section Statistiques MÃ©dias -->
            <HBox spacing="30" alignment="CENTER_LEFT">
              <VBox alignment="CENTER" spacing="4" styleClass="dark-section-card" style="-fx-padding: 12;">
                <Label text="Images Totales" style="-fx-font-size: 12; -fx-text-fill: #7f8c8d;"/>
                <Label fx:id="lblTotalImages" text="0" style="-fx-font-size: 18; -fx-font-weight: bold; -fx-text-fill: #3498db;"/>
              </VBox>
              <VBox alignment="CENTER" spacing="4" styleClass="dark-section-card" style="-fx-padding: 12;">
                <Label text="Logos" style="-fx-font-size: 12; -fx-text-fill: #7f8c8d;"/>
                <Label fx:id="lblTotalLogos" text="0" style="-fx-font-size: 18; -fx-font-weight: bold; -fx-text-fill: #e74c3c;"/>
              </VBox>
              <VBox alignment="CENTER" spacing="4" styleClass="dark-section-card" style="-fx-padding: 12;">
                <Label text="Espace UtilisÃ©" style="-fx-font-size: 12; -fx-text-fill: #7f8c8d;"/>
                <Label fx:id="lblUsedSpace" text="0 MB" style="-fx-font-size: 18; -fx-font-weight: bold; -fx-text-fill: #27ae60;"/>
              </VBox>
              <VBox alignment="CENTER" spacing="4" styleClass="dark-section-card" style="-fx-padding: 12;">
                <Label text="Images Orphelines" style="-fx-font-size: 12; -fx-text-fill: #7f8c8d;"/>
                <Label fx:id="lblOrphanImages" text="0" style="-fx-font-size: 18; -fx-font-weight: bold; -fx-text-fill: #f39c12;"/>
              </VBox>
            </HBox>
            
            <!-- Section Import et Actions Rapides -->
            <VBox spacing="10">
              <Label text="Actions Rapides" styleClass="dark-section-title" style="-fx-font-size: 14; -fx-font-weight: bold;"/>
              <HBox spacing="10">
                <Button fx:id="btnImportFromFolder" text="ðŸ“ Importer Dossier" onAction="#onImportFromFolder" style="-fx-background-color: #3498db; -fx-text-fill: white;"/>
                <Button fx:id="btnImportFromClipboard" text="ðŸ“‹ Coller Image" onAction="#onImportFromClipboard" style="-fx-background-color: #16a085; -fx-text-fill: white;"/>
                <Button fx:id="btnImportLogo" text="ðŸ¢ Importer Logo" onAction="#onImportLogo" style="-fx-background-color: #e74c3c; -fx-text-fill: white;"/>
                <Separator orientation="VERTICAL"/>
                <Button fx:id="btnRefreshMediaData" text="ðŸ”„ Actualiser" onAction="#onRefreshMediaData" style="-fx-background-color: #95a5a6; -fx-text-fill: white;"/>
              </HBox>
            </VBox>
            
            <!-- Section Recherche et Filtres -->
            <VBox spacing="10">
              <Label text="Recherche et Filtres" styleClass="dark-section-title" style="-fx-font-size: 14; -fx-font-weight: bold;"/>
              <HBox spacing="10">
                <TextField fx:id="txtMediaSearch" promptText="Rechercher un fichier mÃ©dia..." prefWidth="300"/>
                <ComboBox fx:id="cbMediaType" promptText="Type de mÃ©dia" prefWidth="150"/>
                <ComboBox fx:id="cbMediaSize" promptText="Taille" prefWidth="120"/>
                <Button fx:id="btnSearchMedia" text="ðŸ”" onAction="#onSearchMedia" style="-fx-background-color: #8e44ad; -fx-text-fill: white;"/>
                <Button fx:id="btnClearMediaSearch" text="âŒ" onAction="#onClearMediaSearch" style="-fx-background-color: #bdc3c7; -fx-text-fill: white;"/>
              </HBox>
            </VBox>
            
            <!-- Section Table des MÃ©dias -->
            <VBox spacing="10" VBox.vgrow="ALWAYS">
              <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="Liste des Fichiers MÃ©dias" styleClass="dark-section-title" style="-fx-font-size: 14; -fx-font-weight: bold;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label fx:id="lblMediaCount" text="0 fichiers" style="-fx-text-fill: #666;"/>
              </HBox>
              
              <TableView fx:id="tableMediaFiles" prefHeight="350" VBox.vgrow="ALWAYS">
                <placeholder><Label text="Aucun fichier mÃ©dia trouvÃ©. Utilisez les boutons d'import pour ajouter des images." style="-fx-text-fill: #7f8c8d; -fx-font-style: italic;"/></placeholder>
                <columns>
                  <TableColumn fx:id="colMediaId" text="ID" prefWidth="50" resizable="false"/>
                  <TableColumn fx:id="colMediaName" text="Nom du Fichier" prefWidth="200"/>
                  <TableColumn fx:id="colMediaType" text="Type" prefWidth="80"/>
                  <TableColumn fx:id="colMediaSize" text="Taille" prefWidth="80"/>
                  <TableColumn fx:id="colMediaDimensions" text="Dimensions" prefWidth="100"/>
                  <TableColumn fx:id="colMediaPath" text="Chemin" prefWidth="250"/>
                  <TableColumn fx:id="colMediaUsage" text="Utilisation" prefWidth="120"/>
                  <TableColumn fx:id="colMediaDate" text="Date Ajout" prefWidth="120"/>
                </columns>
                <columnResizePolicy>
                  <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                </columnResizePolicy>
              </TableView>
              
              <!-- Actions sur les mÃ©dias -->
              <HBox spacing="10">
                <Button fx:id="btnAddMedia" text="âž• Ajouter MÃ©dia" onAction="#onAddMedia" style="-fx-background-color: #27ae60; -fx-text-fill: white;"/>
                <Button fx:id="btnEditMedia" text="âœï¸ Modifier" onAction="#onEditMedia" disable="true" style="-fx-background-color: #4a90e2; -fx-text-fill: white;"/>
                <Button fx:id="btnDeleteMedia" text="ðŸ—‘ï¸ Supprimer" onAction="#onDeleteMedia" disable="true" style="-fx-background-color: #e74c3c; -fx-text-fill: white;"/>
                <Separator orientation="VERTICAL"/>
                <Button fx:id="btnPreviewMedia" text="ï¿½ï¸ AperÃ§u" onAction="#onPreviewMedia" disable="true" style="-fx-background-color: #9b59b6; -fx-text-fill: white;"/>
                <Button fx:id="btnOpenMediaFolder" text="ï¿½ Ouvrir Dossier" onAction="#onOpenMediaFolder" disable="true" style="-fx-background-color: #34495e; -fx-text-fill: white;"/>
                <Separator orientation="VERTICAL"/>
                <Button fx:id="btnCleanOrphanMedia" text="ðŸ§¹ Nettoyer Orphelins" onAction="#onCleanOrphanMedia" style="-fx-background-color: #f39c12; -fx-text-fill: white;"/>
              </HBox>
            </VBox>
            
          </VBox>
        </ScrollPane>
      </Tab>
      
      <!-- Section DONNÃ‰ES -->
      <Tab text="ðŸ—‚ï¸ DonnÃ©es" closable="false">
        <ScrollPane fitToWidth="true" fitToHeight="true">
          <VBox spacing="20" style="-fx-padding: 20;">
            
            <!-- Note d'information -->
            <VBox spacing="10" style="-fx-background-color: #e8f4f8; -fx-padding: 15; -fx-border-color: #4a90e2; -fx-border-width: 1; -fx-border-radius: 5;">
              <Label text="â„¹ï¸ Information importante" style="-fx-font-weight: bold; -fx-text-fill: #2c5282;"/>
              <Label text="Ceci est le seul endroit oÃ¹ les informations de votre sociÃ©tÃ© (Mag ScÃ¨ne) peuvent Ãªtre modifiÃ©es. Ces donnÃ©es sont protÃ©gÃ©es dans le reste de l'application." 
                     wrapText="true" style="-fx-text-fill: #2c5282;"/>
            </VBox>
            
            <!-- Section Informations GÃ©nÃ©rales -->
            <VBox spacing="15">
              <Label text="Informations GÃ©nÃ©rales" style="-fx-font-weight: bold; -fx-font-size: 16;"/>
              
              <GridPane hgap="15" vgap="10">
                <columnConstraints>
                  <ColumnConstraints minWidth="120" prefWidth="150"/>
                  <ColumnConstraints hgrow="ALWAYS" minWidth="250"/>
                </columnConstraints>
                
                <Label text="Nom de la sociÃ©tÃ©:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                <TextField fx:id="txtCompanyName" promptText="Mag ScÃ¨ne" GridPane.rowIndex="0" GridPane.columnIndex="1"/>
                
                <Label text="Raison sociale:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                <TextField fx:id="txtCompanyLegalName" promptText="Mag ScÃ¨ne SARL" GridPane.rowIndex="1" GridPane.columnIndex="1"/>
                
                <Label text="SIRET:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                <TextField fx:id="txtCompanySiret" promptText="12345678901234" GridPane.rowIndex="2" GridPane.columnIndex="1"/>
                
                <Label text="Secteur d'activitÃ©:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                <TextField fx:id="txtCompanySector" promptText="Audiovisuel et technique" GridPane.rowIndex="3" GridPane.columnIndex="1"/>
                
                <Label text="Adresse:" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                <TextField fx:id="txtCompanyAddress" promptText="123 Rue de la Technique" GridPane.rowIndex="4" GridPane.columnIndex="1"/>
                
                <Label text="Code postal:" GridPane.rowIndex="5" GridPane.columnIndex="0"/>
                <TextField fx:id="txtCompanyPostalCode" promptText="75001" GridPane.rowIndex="5" GridPane.columnIndex="1"/>
                
                <Label text="Ville:" GridPane.rowIndex="6" GridPane.columnIndex="0"/>
                <TextField fx:id="txtCompanyCity" promptText="Paris" GridPane.rowIndex="6" GridPane.columnIndex="1"/>
                
                <Label text="Pays:" GridPane.rowIndex="7" GridPane.columnIndex="0"/>
                <TextField fx:id="txtCompanyCountry" promptText="France" GridPane.rowIndex="7" GridPane.columnIndex="1"/>
                
                <Label text="TÃ©lÃ©phone:" GridPane.rowIndex="8" GridPane.columnIndex="0"/>
                <TextField fx:id="txtCompanyPhone" promptText="01 23 45 67 89" GridPane.rowIndex="8" GridPane.columnIndex="1"/>
                
                <Label text="Email:" GridPane.rowIndex="9" GridPane.columnIndex="0"/>
                <TextField fx:id="txtCompanyEmail" promptText="contact@magscene.fr" GridPane.rowIndex="9" GridPane.columnIndex="1"/>
                
                <Label text="Site web:" GridPane.rowIndex="10" GridPane.columnIndex="0"/>
                <TextField fx:id="txtCompanyWebsite" promptText="https://www.magscene.fr" GridPane.rowIndex="10" GridPane.columnIndex="1"/>
              </GridPane>
              
              <VBox spacing="10">
                <Label text="Description:" style="-fx-font-weight: bold;"/>
                <TextArea fx:id="txtCompanyDescription" promptText="Description de votre sociÃ©tÃ©..." 
                         prefRowCount="3" wrapText="true"/>
              </VBox>
            </VBox>
            
            <Separator/>
            
            <!-- Section Logo -->
            <VBox spacing="15">
              <Label text="Logo de la SociÃ©tÃ©" style="-fx-font-weight: bold; -fx-font-size: 16;"/>
              
              <HBox spacing="15" alignment="CENTER_LEFT">
                <VBox spacing="10" alignment="TOP_CENTER">
                  <ImageView fx:id="imgCompanyLogo" fitWidth="120" fitHeight="120" 
                           preserveRatio="true" style="-fx-border-color: #ccc; -fx-border-width: 1; -fx-background-color: #f9f9f9;"/>
                  <Label text="Logo actuel" style="-fx-font-size: 12; -fx-text-fill: #666;"/>
                </VBox>
                
                <VBox spacing="10">
                  <Button fx:id="btnSelectLogo" text="ðŸ“ SÃ©lectionner Logo" onAction="#onSelectCompanyLogo" 
                          style="-fx-background-color: #4CAF50; -fx-text-fill: white;"/>
                  <Button fx:id="btnRemoveLogo" text="ðŸ—‘ï¸ Supprimer Logo" onAction="#onRemoveCompanyLogo"/>
                  <Label text="Formats acceptÃ©s: PNG, JPG, GIF" style="-fx-font-size: 10; -fx-text-fill: #666;"/>
                  <Label text="Taille recommandÃ©e: 200x200 px" style="-fx-font-size: 10; -fx-text-fill: #666;"/>
                </VBox>
              </HBox>
            </VBox>
            
            <Separator/>
            
            <!-- Section Personnel -->
            <VBox spacing="15">
              <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="Personnel de la SociÃ©tÃ©" style="-fx-font-weight: bold; -fx-font-size: 16;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button fx:id="btnAddUser" text="âž• Ajouter Utilisateur" onAction="#onAddUser" 
                        style="-fx-background-color: #2196F3; -fx-text-fill: white;"/>
              </HBox>
              
              <!-- Tableau des utilisateurs -->
              <TableView fx:id="companyUsersTable" prefHeight="200">
                <columns>
                  <TableColumn fx:id="colUserName" text="Nom Complet" prefWidth="150"/>
                  <TableColumn fx:id="colUserUsername" text="Nom d'utilisateur" prefWidth="120"/>
                  <TableColumn fx:id="colUserPosition" text="Poste" prefWidth="130"/>
                  <TableColumn fx:id="colUserRole" text="RÃ´le" prefWidth="120"/>
                  <TableColumn fx:id="colUserEmail" text="Email" prefWidth="180"/>
                  <TableColumn fx:id="colUserPhone" text="TÃ©lÃ©phone" prefWidth="120"/>
                  <TableColumn fx:id="colUserActive" text="Actif" prefWidth="60"/>
                </columns>
                <columnResizePolicy>
                  <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                </columnResizePolicy>
                <placeholder>
                  <Label text="Aucun utilisateur dans cette sociÃ©tÃ©"/>
                </placeholder>
              </TableView>
              
              <!-- Actions utilisateurs -->
              <HBox spacing="10">
                <Button fx:id="btnEditUser" text="âœï¸ Modifier" onAction="#onEditUser" disable="true"/>
                <Button fx:id="btnDeleteUser" text="ðŸ—‘ï¸ Supprimer" onAction="#onDeleteUser" disable="true"/>
                <Separator orientation="VERTICAL"/>
                <Button fx:id="btnResetPassword" text="ðŸ”‘ RÃ©initialiser Mot de Passe" onAction="#onResetUserPassword" disable="true"/>
                <Button fx:id="btnToggleActive" text="â¯ï¸ Activer/DÃ©sactiver" onAction="#onToggleUserActive" disable="true"/>
              </HBox>
              
              <!-- Statistiques -->
              <HBox spacing="20" style="-fx-padding: 10; -fx-background-color: #f5f5f5; -fx-background-radius: 5;">
                <Label fx:id="lblTotalUsers" text="Total: 0" style="-fx-font-weight: bold;"/>
                <Label fx:id="lblActiveUsers" text="Actifs: 0" style="-fx-text-fill: #4CAF50;"/>
                <Label fx:id="lblInactiveUsers" text="Inactifs: 0" style="-fx-text-fill: #f44336;"/>
                <Label fx:id="lblAdminUsers" text="Admins: 0" style="-fx-text-fill: #2196F3;"/>
              </HBox>
            </VBox>
            
          </VBox>
        </ScrollPane>
      </Tab>
      
    </TabPane>
  </center>
  
  <bottom>
    <HBox spacing="15" style="-fx-padding: 15; -fx-alignment: center-right;">
      <Button fx:id="btnSaveAll" text="ðŸ’¾ Tout Sauvegarder" onAction="#onSaveAll" 
              style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-font-weight: bold;"/>
      <Button fx:id="btnCancel" text="âŒ Annuler" onAction="#onCancel"/>
    </HBox>
  </bottom>
</BorderPane>