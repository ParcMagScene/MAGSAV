<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.magsav.gui.product.ProductDetailController" prefWidth="900" prefHeight="600">
  <top>
    <HBox spacing="12" style="-fx-padding:12;">
      <children>
        <VBox spacing="6">
          <children>
            <ImageView fx:id="imgPhoto" fitHeight="100" preserveRatio="true"/>
            <Button text="Choisir photo…" onAction="#onChoosePhoto" />
          </children>
        </VBox>
        <VBox spacing="6">
          <children>
            <Label fx:id="lblName" style="-fx-font-size:18px; -fx-font-weight:bold;"/>
            <HBox spacing="8">
              <children>
                <Label text="Code:"/>
                <Label fx:id="lblCode"/>
                <Label text="SN:" style="-fx-padding: 0 0 0 16;"/>
                <Label fx:id="lblSN"/>
                <Label text="UID:" style="-fx-padding: 0 0 0 16;"/>
                <Label fx:id="lblUID"/>
              </children>
            </HBox>
            <HBox spacing="8">
              <children>
                <Label text="Fabricant:"/>
                <ComboBox fx:id="cbManufacturer" onAction="#onChangeManufacturer" prefWidth="260"/>
                <ImageView fx:id="imgLogo" fitHeight="24" preserveRatio="true" style="-fx-padding: 0 0 0 12;"/>
                <Label text="Situation:" style="-fx-padding: 0 0 0 16;"/>
                <Label fx:id="lblSituation"/>
              </children>
            </HBox>
            <HBox spacing="8">
              <children>
                <Label text="Propriétaire:"/>
                <Label fx:id="lblOwner"/>
              </children>
            </HBox>
            <HBox spacing="8">
              <children>
                <Label text="Catégorie:"/>
                <ComboBox fx:id="cbCategory" prefWidth="220" onAction="#onChangeCategory" editable="true"/>
                <Label text="Sous-catégorie:" style="-fx-padding: 0 0 0 16;"/>
                <ComboBox fx:id="cbSubcategory" prefWidth="220" onAction="#onChangeSubcategory" editable="true"/>
              </children>
            </HBox>
            <HBox spacing="8">
              <children>
                <Label text="Nouvelle sous-catégorie:"/>
                <TextField fx:id="tfNewSubcategory" promptText="Nom de sous-catégorie" prefWidth="240"/>
                <Button text="Valider" onAction="#onValidateNewSubcategory"/>
              </children>
            </HBox>
          </children>
        </VBox>
        <Pane HBox.hgrow="ALWAYS"/>
        <ImageView fx:id="imgQr" fitHeight="80" preserveRatio="true"/>
      </children>
    </HBox>
  </top>

  <center>
    <TabPane>
      <tabs>
        <Tab text="Historique" closable="false">
          <content>
            <TableView fx:id="historyTable">
              <columns>
                <TableColumn fx:id="colId" text="ID" prefWidth="90"/>
                <TableColumn fx:id="colStatut" text="Statut" prefWidth="140"/>
                <TableColumn fx:id="colPanne" text="Panne" prefWidth="260"/>
                <TableColumn fx:id="colEntree" text="Entrée" prefWidth="120"/>
                <TableColumn fx:id="colSortie" text="Sortie" prefWidth="120"/>
              </columns>
            </TableView>
          </content>
        </Tab>
      </tabs>
    </TabPane>
  </center>

  <bottom>
    <HBox spacing="8" style="-fx-padding:12;" alignment="CENTER_RIGHT">
      <children>
        <Button text="Nouvelle intervention" onAction="#onCreateIntervention"/>
        <Button text="Exporter PDF" onAction="#onExportPdf"/>
        <Button text="Valider les changements" onAction="#onValidateChanges"/>
      </children>
    </HBox>
  </bottom>
</BorderPane>