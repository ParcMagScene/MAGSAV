<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.*?>

<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.magsav.gui.ClientDetailController" prefWidth="800" prefHeight="600">
  
  <top>
    <VBox styleClass="detail-header" spacing="20" style="-fx-padding: 20;">
      <HBox spacing="15" alignment="CENTER_LEFT">
        <ImageView fx:id="imgClientLogo" fitWidth="64" fitHeight="64" preserveRatio="true">
          <image>
            <Image url="@../icons/client-default.png"/>
          </image>
        </ImageView>
        <VBox spacing="5">
          <Label fx:id="lblClientName" text="Nom du client" styleClass="title"/>
          <Label fx:id="lblClientType" text="Type: Client" styleClass="subtitle"/>
          <Label fx:id="lblClientId" text="ID: #000" styleClass="muted"/>
        </VBox>
        <Pane HBox.hgrow="ALWAYS"/>
        <VBox spacing="10" alignment="CENTER_RIGHT">
          <HBox spacing="10">
            <Button fx:id="btnEdit" text="âœï¸ Modifier" onAction="#onEdit" styleClass="button"/>
            <Button fx:id="btnSave" text="ðŸ’¾ Sauvegarder" onAction="#onSave" disable="true" styleClass="button-success"/>
            <Button fx:id="btnCancel" text="âŒ Annuler" onAction="#onCancel" disable="true" styleClass="button-error"/>
          </HBox>
        </VBox>
      </HBox>
    </VBox>
  </top>
  
  <center>
    <TabPane fx:id="tabPane" tabClosingPolicy="UNAVAILABLE" style="-fx-padding: 15;">
      
      <!-- Onglet Informations gÃ©nÃ©rales -->
      <Tab text="â„¹ï¸ Informations" closable="false">
        <ScrollPane fitToWidth="true" styleClass="transparent">
          <VBox spacing="20" style="-fx-padding: 20;">
            
            <!-- Informations de base -->
            <VBox spacing="15" styleClass="detail-section">
              <Label text="Informations de base" styleClass="detail-title"/>
              
              <GridPane hgap="15" vgap="15">
                <columnConstraints>
                  <ColumnConstraints minWidth="120"/>
                  <ColumnConstraints hgrow="ALWAYS"/>
                  <ColumnConstraints minWidth="120"/>
                  <ColumnConstraints hgrow="ALWAYS"/>
                </columnConstraints>
                
                <Label text="Nom complet :" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                <TextField fx:id="txtName" GridPane.rowIndex="0" GridPane.columnIndex="1" disable="true"/>
                
                <Label text="Email :" GridPane.rowIndex="0" GridPane.columnIndex="2"/>
                <TextField fx:id="txtEmail" GridPane.rowIndex="0" GridPane.columnIndex="3" disable="true"/>
                
                <Label text="TÃ©lÃ©phone :" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                <TextField fx:id="txtPhone" GridPane.rowIndex="1" GridPane.columnIndex="1" disable="true"/>
                
                <Label text="Site web :" GridPane.rowIndex="1" GridPane.columnIndex="2"/>
                <TextField fx:id="txtWebsite" GridPane.rowIndex="1" GridPane.columnIndex="3" disable="true"/>
              </GridPane>
            </VBox>
            
            <!-- Adresse -->
            <VBox spacing="15" styleClass="detail-section">
              <Label text="Adresse" styleClass="detail-title"/>
              
              <GridPane hgap="15" vgap="15">
                <columnConstraints>
                  <ColumnConstraints minWidth="120"/>
                  <ColumnConstraints hgrow="ALWAYS"/>
                  <ColumnConstraints minWidth="120"/>
                  <ColumnConstraints hgrow="ALWAYS"/>
                </columnConstraints>
                
                <Label text="Adresse :" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                <TextField fx:id="txtAddress" GridPane.rowIndex="0" GridPane.columnIndex="1" GridPane.columnSpan="3" disable="true"/>
                
                <Label text="Code postal :" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                <TextField fx:id="txtPostalCode" GridPane.rowIndex="1" GridPane.columnIndex="1" disable="true"/>
                
                <Label text="Ville :" GridPane.rowIndex="1" GridPane.columnIndex="2"/>
                <TextField fx:id="txtCity" GridPane.rowIndex="1" GridPane.columnIndex="3" disable="true"/>
                
                <Label text="Pays :" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                <TextField fx:id="txtCountry" GridPane.rowIndex="2" GridPane.columnIndex="1" disable="true"/>
              </GridPane>
            </VBox>
            
            <!-- Notes -->
            <VBox spacing="15" styleClass="detail-section">
              <Label text="Notes et commentaires" styleClass="detail-title"/>
              <TextArea fx:id="txtNotes" prefRowCount="4" disable="true" promptText="Notes sur le client..."/>
            </VBox>
            
          </VBox>
        </ScrollPane>
      </Tab>
      
      <!-- Onglet Interventions -->
      <Tab text="ðŸ”§ Interventions" closable="false">
        <VBox spacing="15" style="-fx-padding: 20;">
          
          <HBox spacing="10" alignment="CENTER_LEFT">
            <Label text="Historique des interventions" styleClass="detail-title"/>
            <Pane HBox.hgrow="ALWAYS"/>
            <Button text="âž• Nouvelle intervention" onAction="#onNewIntervention" styleClass="button-success"/>
          </HBox>
          
          <TableView fx:id="interventionsTable" VBox.vgrow="ALWAYS">
            <columns>
              <TableColumn fx:id="colInterventionId" text="ID" prefWidth="60"/>
              <TableColumn fx:id="colInterventionProduit" text="Produit" prefWidth="200"/>
              <TableColumn fx:id="colInterventionStatut" text="Statut" prefWidth="120"/>
              <TableColumn fx:id="colInterventionDate" text="Date" prefWidth="120"/>
              <TableColumn fx:id="colInterventionPanne" text="Panne" prefWidth="200"/>
            </columns>
            <placeholder><Label text="Aucune intervention enregistrÃ©e"/></placeholder>
          </TableView>
          
        </VBox>
      </Tab>
      
      <!-- Onglet Contacts -->
      <Tab text="ðŸ‘¥ Contacts" closable="false">
        <VBox spacing="15" style="-fx-padding: 20;">
          
          <HBox spacing="10" alignment="CENTER_LEFT">
            <Label text="Personnes de contact" styleClass="detail-title"/>
            <Pane HBox.hgrow="ALWAYS"/>
            <Button text="âž• Ajouter contact" onAction="#onAddContact" styleClass="button-success"/>
          </HBox>
          
          <TableView fx:id="contactsTable" VBox.vgrow="ALWAYS">
            <columns>
              <TableColumn fx:id="colContactName" text="Nom" prefWidth="150"/>
              <TableColumn fx:id="colContactPosition" text="Poste" prefWidth="130"/>
              <TableColumn fx:id="colContactEmail" text="Email" prefWidth="180"/>
              <TableColumn fx:id="colContactPhone" text="TÃ©lÃ©phone" prefWidth="120"/>
              <TableColumn fx:id="colContactNotes" text="Notes" prefWidth="200"/>
            </columns>
            <placeholder><Label text="Aucun contact enregistrÃ©"/></placeholder>
          </TableView>
          
        </VBox>
      </Tab>
      
    </TabPane>
  </center>
  
  <bottom>
    <HBox styleClass="status-bar" spacing="15" alignment="CENTER_LEFT">
      <Label fx:id="lblStatus" text="PrÃªt" styleClass="muted"/>
      <Pane HBox.hgrow="ALWAYS"/>
      <Label fx:id="lblLastModified" text="DerniÃ¨re modification: jamais" styleClass="muted small"/>
      <Separator orientation="VERTICAL"/>
      <Button text="ðŸ”„ Actualiser" onAction="#onRefresh" styleClass="button-primary"/>
      <Button text="âŒ Fermer" onAction="#onClose"/>
    </HBox>
  </bottom>
  
</BorderPane>